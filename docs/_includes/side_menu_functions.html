<script>
  $(document).ready(function() {
      $('.collapseBtn').click(function(){
        $(this).toggleClass('rotate-caret');
      });

      function clickNoTransition(button) {
        var collapsibleElement = button.closest('div');
        collapsibleElement.addClass('no-transition');

        button.click();

        setTimeout(() => {
            collapsibleElement.removeClass('no-transition');
        }, 0);
      }

      function expandMenu() {
        // Locate the <li> element containing the 'current_page' class
        var currentPageItem = $('.current_page').closest('li');
    
        // Expand all parent elements
        currentPageItem.parents('li').each(function() {
            var collapseButton = $(this).children('.collapseBtn');
            if (collapseButton.attr('aria-expanded') === 'false') {
              clickNoTransition(collapseButton);
            }
        });
    
        // Additionally, click the collapse button of the current_page's <li> if necessary
        var currentPageCollapseButton = currentPageItem.children('.collapseBtn');
        if (currentPageCollapseButton.attr('aria-expanded') === 'false') {
          clickNoTransition(currentPageCollapseButton);
        }
      }
      expandMenu();
      //setTimeout(expandMenu, 500);
  });
  </script>
  